<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.9.0 by Michael Rose
  Copyright 2013-2018 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="zh" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin SEO -->









<title>Python速成 - 木公的博客-Anyinlover Blog</title>




<meta name="description" content="得到python从python官网可以下载python，对于数据科学家来说，更方便的是直接下载Anaconda分发包。">




<meta name="author" content="Anyinlover">

<meta property="og:locale" content="zh_CN">
<meta property="og:site_name" content="木公的博客-Anyinlover Blog">
<meta property="og:title" content="Python速成">


  <link rel="canonical" href="http://localhost:4000/%E7%AC%94%E8%AE%B0/crash-python/">
  <meta property="og:url" content="http://localhost:4000/%E7%AC%94%E8%AE%B0/crash-python/">



  <meta property="og:description" content="得到python从python官网可以下载python，对于数据科学家来说，更方便的是直接下载Anaconda分发包。">

















  

  



  <meta property="og:image" content="http://localhost:4000/img/sunrise.jpg">



  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2016-05-07T00:00:00+08:00">






  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "http://localhost:4000",
      "logo": "http://localhost:4000/img/tree.jpg"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Anyinlover",
      "url" : "http://localhost:4000",
      "sameAs" : null
    }
  </script>







<!-- end SEO -->


<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="木公的博客-Anyinlover Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="http://localhost:4000/">木公的博客-Anyinlover Blog</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item">
              <a href="http://localhost:4000/about" >关于</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="http://localhost:4000/year-archive/" >博文</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="http://localhost:4000/categories/" >类别</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="http://localhost:4000/tags/" >标签</a>
            </li>
          
        </ul>
        
        <button class="search__toggle" type="button">
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle" type="button">
          <span class="visually-hidden">切换菜单</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    <div class="initial-content">
      
  











<div class="page__hero--overlay"
  style=" background-image: url('http://localhost:4000/img/sunrise.jpg');"
>
  
    <div class="wrapper">
      <h1 class="page__title" itemprop="headline">
        
          Python速成

        
      </h1>
      
      
      
    </div>
  
  
</div>





<div id="main" role="main">
  
  <div class="sidebar sticky">
  

<div itemscope itemtype="http://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="http://localhost:4000/img/morning.jpg" alt="Anyinlover" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Anyinlover</h3>
    
    
      <p class="author__bio" itemprop="description">
        未经审视的人生是不值得过的
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">关注</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="http://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Xi'an</span>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      
        <li>
          <a href="https://github.com/anyinlover" itemprop="sameAs">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      
        <li>
          <a href="https://www.weibo.com/2663254313" itemprop="sameAs">
            <i class="fab fa-fw fa-weibo" aria-hidden="true"></i> Weibo
          </a>
        </li>
      

      

      

      

        <li>
          <a href="https://www.douban.com/people/48573787/" itemprop="sameAs">
            <span class="fa-layers fa-fw">
              <i class="fas fa-circle"></i>
              <span class="fa-layers-text fa-inverse" data-fa-transform="shrink-4">豆</span>
            </span>
            Douban
          </a>
        </li>
      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Python速成">
    <meta itemprop="description" content="得到python从python官网可以下载python，对于数据科学家来说，更方便的是直接下载Anaconda分发包。">
    <meta itemprop="datePublished" content="May 07, 2016">
    

    <div class="page__inner-wrap">
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> 目录</h4></header>
              <ul class="toc__menu">
  <li><a href="#得到python">得到python</a></li>
  <li><a href="#python之禅">python之禅</a></li>
  <li><a href="#空格格式化">空格格式化</a></li>
  <li><a href="#模块">模块</a></li>
  <li><a href="#算术">算术</a></li>
  <li><a href="#函数">函数</a></li>
  <li><a href="#字符串">字符串</a></li>
  <li><a href="#异常">异常</a></li>
  <li><a href="#列表">列表</a></li>
  <li><a href="#元组">元组</a></li>
  <li><a href="#字典">字典</a>
    <ul>
      <li><a href="#默认字典">默认字典</a></li>
      <li><a href="#计数">计数</a></li>
    </ul>
  </li>
  <li><a href="#集合">集合</a></li>
  <li><a href="#控制流">控制流</a></li>
  <li><a href="#真值">真值</a></li>
  <li><a href="#排序">排序</a></li>
  <li><a href="#列表生成器">列表生成器</a></li>
  <li><a href="#生成器和迭代器">生成器和迭代器</a></li>
  <li><a href="#随机数">随机数</a></li>
  <li><a href="#正则表达式">正则表达式</a></li>
  <li><a href="#面向对象编程">面向对象编程</a></li>
  <li><a href="#函数工具">函数工具</a></li>
  <li><a href="#遍历">遍历</a></li>
  <li><a href="#打包与解压">打包与解压</a></li>
  <li><a href="#无名参数和关键字参数">无名参数和关键字参数</a></li>
</ul>
            </nav>
          </aside>
        
        <h2 id="得到python">得到python</h2>
<p>从python官网可以下载python，对于数据科学家来说，更方便的是直接下载Anaconda分发包。</p>

<p>pip是python包管理工具，利用它可以很方便的寻找安装python包。</p>

<p>Ipython是一个增强版的python shell。和它配套使用的还有一个jupyter notebook，有很好的交互界面，是我目前使用python的主力战场。</p>

<h2 id="python之禅">python之禅</h2>
<p>下面描述了python之禅：python的设计原则，</p>

<blockquote>
  <p>Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Flat is better than nested.
Sparse is better than dense.
Readability counts.
Special cases aren’t special enough to break the rules.
Although practicality beats purity.
Errors should never pass silently.
Unless explicitly silenced.
In the face of ambiguity, refuse the temptation to guess.
There should be one– and preferably only one –obvious way to do it.
Although that way may not be obvious at first unless you’re Dutch.
Now is better than never.
Although never is often better than <em>right</em> now.
If the implementation is hard to explain, it’s a bad idea.
If the implementation is easy to explain, it may be a good idea.
Namespaces are one honking great idea – let’s do more of those!</p>
</blockquote>

<p>其中最常见得一条就是在python中只有一种最好的实现方法，常常被称为Pythonic。</p>

<h2 id="空格格式化">空格格式化</h2>
<p>python中用缩进来表示代码块。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"done looping"</span><span class="p">)</span>
</code></pre></div></div>
<p>这让python代码非常具有可读性，但也因此需要注意空格的使用。空格在括号内是被忽略的，比如用在下面的长代码中：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">long_winded_computation</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">+</span> <span class="mi">5</span> <span class="o">+</span> <span class="mi">6</span> <span class="o">+</span> <span class="mi">7</span> <span class="o">+</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">9</span> <span class="o">+</span> <span class="mi">10</span> <span class="o">+</span> <span class="mi">11</span>
                        <span class="o">+</span> <span class="mi">12</span> <span class="o">+</span> <span class="mi">13</span> <span class="o">+</span> <span class="mi">14</span> <span class="o">+</span> <span class="mi">15</span> <span class="o">+</span> <span class="mi">16</span> <span class="o">+</span> <span class="mi">17</span> <span class="o">+</span> <span class="mi">18</span> <span class="o">+</span> <span class="mi">19</span> <span class="o">+</span> <span class="mi">20</span><span class="p">)</span>
</code></pre></div></div>

<p>或者让代码变得更加可读：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">list_of_lists</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]]</span>
<span class="n">easier_to_read_list_of_lists</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
                                 <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
                                 <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span> <span class="p">]</span>
</code></pre></div></div>

<p>反斜杠可以用来断行，但一般很少用：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">two_plus_three</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> \
                 <span class="mi">3</span>
</code></pre></div></div>

<p>使用空格的一个缺陷是代码复制时会变形，在Ipython中有一个函数<code class="highlighter-rouge">%paste</code>可以解决这个问题。</p>

<h2 id="模块">模块</h2>

<p>python的很多功能都需要导入模块来实现。</p>

<p>一种简单的方法是把模块整个导入：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">re</span>
<span class="n">my_regex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">"[0-9]+"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span>
</code></pre></div></div>
<p>这样导入后只能通过加前缀<code class="highlighter-rouge">re.</code>来调用模块内的函数。</p>

<p>如果代码中这个标识符已经被使用，可以用别名来替代：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">re</span> <span class="k">as</span> <span class="n">regex</span>
<span class="n">my_regex</span> <span class="o">=</span> <span class="n">regex</span><span class="o">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">"[0-9]+"</span><span class="p">,</span> <span class="n">regex</span><span class="o">.</span><span class="n">I</span><span class="p">)</span>
</code></pre></div></div>
<p>当模块名称不清晰或者过于冗长时，也可以用别名：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
</code></pre></div></div>

<p>如果只需要使用到模块中一些特定的子模块或函数，可以显性的导入：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span><span class="p">,</span> <span class="n">Counter</span>
<span class="n">lookup</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">my_counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
</code></pre></div></div>

<p>另外也有一种做法就是把模块内的值全都导入，但这样会有命名冲突的风险，不推荐这样处理，比如下面<code class="highlighter-rouge">re.match</code>覆盖了原来的<code class="highlighter-rouge">match</code>。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">match</span> <span class="o">=</span> <span class="mi">10</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="o">*</span>
<span class="k">print</span> <span class="n">match</span>
</code></pre></div></div>

<h2 id="算术">算术</h2>

<p>在python2中除法是整数除法，到python3中已经是浮点数除法了。<code class="highlighter-rouge">5/2</code>再也不会等于2了。</p>

<h2 id="函数">函数</h2>

<p>一个函数把输入转化成输出，在python中使用<code class="highlighter-rouge">def</code>来定义函数：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">double</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="s">"""this is where you put an optional docstring
    that explains what the function does.
    for example, this function multiplies its input by 2"""</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span>
</code></pre></div></div>
<p>在python中函数是原始类的，也就是函数可以被赋给变量，也可以作为参数传给另一个函数。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">apply_to_one</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="s">"""calls the function f with 1 as its argument"""</span>
    <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">my_double</span> <span class="o">=</span> <span class="n">double</span> <span class="c"># refers to the previously defined function</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">apply_to_one</span><span class="p">(</span><span class="n">my_double</span><span class="p">)</span> <span class="c"># equals 2</span>
</code></pre></div></div>
<p>使用lambda语法可以创造匿名函数：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">y</span> <span class="o">=</span> <span class="n">apply_to_one</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">4</span><span class="p">)</span> <span class="c"># equals 5</span>
</code></pre></div></div>
<p>lambda函数也能赋给变量，但多数人推荐下面的传统做法：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">another_double</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">x</span> <span class="c"># don't do this</span>
<span class="k">def</span> <span class="nf">another_double</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">x</span> <span class="c"># do this instead</span>
</code></pre></div></div>
<p>函数参数可以指定默认值：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">my_print</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s">"my default message"</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

<span class="n">my_print</span><span class="p">(</span><span class="s">"hello"</span><span class="p">)</span> <span class="c"># prints 'hello'</span>
<span class="n">my_print</span><span class="p">()</span>		 <span class="c"># prints 'my default message'</span>
</code></pre></div></div>
<p>传参时带上变量名有时候也很有用：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">subtract</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span>

<span class="n">subtract</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="c"># returns 5</span>
<span class="n">subtract</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>  <span class="c"># returns -5</span>
<span class="n">subtract</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>  <span class="c"># same as previous</span>
</code></pre></div></div>

<h2 id="字符串">字符串</h2>

<p>字符串可以用单引号或双引号来定义：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">single_quoted_string</span><span class="o">=</span><span class="s">'data science'</span>
<span class="n">double_quoted_string</span><span class="o">=</span><span class="s">"data science"</span>
</code></pre></div></div>

<p>python使用反斜杠来编码特殊字符：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">tab_string</span> <span class="o">=</span> <span class="s">"</span><span class="se">\t</span><span class="s">"</span> <span class="c"># represents the tab character</span>
<span class="nb">len</span><span class="p">(</span><span class="n">tab_string</span><span class="p">)</span>
</code></pre></div></div>
<p>如果仍然想让反斜杠保持为反斜杠，可以用<code class="highlighter-rouge">r""</code>创造原始字符串：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">not_tab_string</span><span class="o">=</span><span class="s">r"\t"</span> <span class="c"># represents the characters '\' and 't'</span>
<span class="nb">len</span><span class="p">(</span><span class="n">not_tab_string</span><span class="p">)</span>
</code></pre></div></div>
<p>可以三个双引号来创建多行的字符串：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">muti_line_string</span> <span class="o">=</span> <span class="s">"""This is the first line.
and this is the second line
and this is the third line"""</span>
</code></pre></div></div>

<h2 id="异常">异常</h2>

<p>在python中可以用<code class="highlighter-rouge">try</code>和<code class="highlighter-rouge">except</code>来处理异常，防止程序报错：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">try</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span>
<span class="k">except</span> <span class="nb">ZeroDivisionError</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"cannot divide by zero"</span><span class="p">)</span>
</code></pre></div></div>
<p>虽然在很多语言中异常被认为是不好的，但在python中偶尔的使用异常可让代码保持整洁。</p>

<h2 id="列表">列表</h2>

<p>列表是python中最基础的数据结构。列表是一个有序集合。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">integer_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">heterogeneous_list</span> <span class="o">=</span> <span class="p">[</span><span class="s">"string"</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="bp">True</span><span class="p">]</span>
<span class="n">list_of_lists</span> <span class="o">=</span> <span class="p">[</span> <span class="n">integer_list</span><span class="p">,</span> <span class="n">heterogeneous_list</span><span class="p">,</span> <span class="p">[]]</span>

<span class="n">list_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">integer_list</span><span class="p">)</span> <span class="c"># equals 3</span>
<span class="n">list_sum</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">integer_list</span><span class="p">)</span> <span class="c"># equals 6</span>
</code></pre></div></div>
<p>可以用方括号来对第n个元素取值或赋值</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span> <span class="c"># is the list [0, 1, ..., 9]</span>
<span class="n">zero</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c"># equals 0, lists are 0-indexed</span>
<span class="n">one</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c"># equals 1</span>
<span class="n">nine</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c"># equals 9, 'Pythonic' for last element</span>
<span class="n">eight</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="c"># equals 8, 'Pythonic' for next-to-last element</span>
<span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="c"># now x is [-1, 1, 2, 3, ..., 9]</span>
</code></pre></div></div>
<p>方括号也可以用来切片：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">first_three</span> <span class="o">=</span> <span class="n">x</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="c"># [-1, 1, 2]</span>
<span class="n">three_to_end</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span> <span class="c"># [3, 4, ..., 9]</span>
<span class="n">one_to_four</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span> <span class="c"># [1, 2, 3, 4]</span>
<span class="n">last_three</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span> <span class="c"># [7, 8, 9]</span>
<span class="n">without_first_and_last</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c"># [1, 2, ..., 8]</span>
<span class="n">copy_of_x</span> <span class="o">=</span> <span class="n">x</span><span class="p">[:]</span> <span class="c"># [-1, 1, 2, ..., 9]</span>
</code></pre></div></div>

<p>python有一个<code class="highlighter-rouge">in</code>操作来验证元素是否在列表中：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">1</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="c"># True</span>
<span class="mi">0</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="c"># False</span>
</code></pre></div></div>
<p>这个操作会依次去进行比较，除非列表比较短，否则会很费时。</p>

<p>把列表串联起来是容易的：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">x</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span> <span class="c"># x is now [1,2,3,4,5,6]</span>
</code></pre></div></div>

<p>如果不想改变x那么可以采用列表加法：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span> <span class="c"># y is [1,2,3,4,5,6]; x is unchanged</span>
</code></pre></div></div>

<p>最常见的还是每次添加一个元素：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c"># x is now [1, 2, 3, 0]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c"># equals 0</span>
<span class="n">z</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="c"># equals 4</span>
</code></pre></div></div>
<p>如果知道列表元素个数还可以使用解包：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="c"># now x is 1, y is 2</span>
</code></pre></div></div>

<p>对于不需要使用的元素可以用下划线替代：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">_</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="c"># now y==2, didn't care about the first element</span>
</code></pre></div></div>

<h2 id="元组">元组</h2>
<p>元组与列表类似，但是不可变的。列表很多不涉及到修改元素的操作都可以用在元组上。元组用小括号来表示：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">my_tuple</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">other_tuple</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span>
<span class="n">my_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span> <span class="c"># my_list is now [1, 3]</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">my_tuple</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="k">except</span> <span class="nb">TypeError</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"cannot modify a tuple"</span><span class="p">)</span>
</code></pre></div></div>
<p>元组可以被用来从函数返回多值。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">sum_and_product</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">)</span>

<span class="n">sp</span> <span class="o">=</span> <span class="n">sum_and_product</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c"># equals (5, 6)</span>
<span class="n">s</span><span class="p">,</span> <span class="n">p</span> <span class="o">=</span> <span class="n">sum_and_product</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="c"># s is 15, p is 50</span>
</code></pre></div></div>
<p>元组和列表都可以用来赋多值：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span> <span class="c"># now x is 1, y is 2</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="c"># Pythonic way to swap variables; now x is 2, y is 1</span>
</code></pre></div></div>

<h2 id="字典">字典</h2>

<p>字典是另一种基本数据结构，将键和值相对应，方便快速查找。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">empty_dict</span> <span class="o">=</span> <span class="p">{}</span> <span class="c"># Pythonic</span>
<span class="n">empty_dict2</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span> <span class="c"># less Pythonic</span>
<span class="n">grades</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Joel"</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span> <span class="s">"Tim"</span><span class="p">:</span> <span class="mi">95</span><span class="p">}</span> <span class="c"># dictionary literal</span>
</code></pre></div></div>
<p>可以通过键来查找值。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">joels_grade</span> <span class="o">=</span> <span class="n">grades</span><span class="p">[</span><span class="s">"Joel"</span><span class="p">]</span> <span class="c"># equals 80</span>
</code></pre></div></div>
<p>假如键不在字典中，就会报错<code class="highlighter-rouge">KeyError</code>：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">try</span><span class="p">:</span>
    <span class="n">kates_grade</span> <span class="o">=</span> <span class="n">grades</span><span class="p">[</span><span class="s">"Kate"</span><span class="p">]</span>
<span class="k">except</span> <span class="nb">KeyError</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"no grad for Kate!"</span><span class="p">)</span>
</code></pre></div></div>

<p>可以用下面的方法检查键是否存在：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">joel_has_grade</span> <span class="o">=</span> <span class="s">"Joel"</span> <span class="ow">in</span> <span class="n">grades</span> <span class="c"># True</span>
<span class="n">kate_has_grade</span> <span class="o">=</span> <span class="s">"Kate"</span> <span class="ow">in</span> <span class="n">grades</span> <span class="c"># False</span>
</code></pre></div></div>
<p>字典有一个<code class="highlighter-rouge">get</code>方法可以在键不存在时返回一个默认值：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">joels_grade</span> <span class="o">=</span> <span class="n">grades</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">"Joel"</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c"># equals 80</span>
<span class="n">kates_grade</span> <span class="o">=</span> <span class="n">grades</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">"Kate"</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c"># equals 0</span>
<span class="n">no_ones_grade</span> <span class="o">=</span> <span class="n">grades</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">"No One"</span><span class="p">)</span> <span class="c"># default default is None</span>
</code></pre></div></div>
<p>用中括号可以对键赋值：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">grades</span><span class="p">[</span><span class="s">"Tim"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">99</span> <span class="c"># replaces the old value</span>
<span class="n">grades</span><span class="p">[</span><span class="s">"Kate"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span> <span class="c"># adds a third entry</span>
<span class="n">num_students</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">grades</span><span class="p">)</span> <span class="c"># equals 3</span>
</code></pre></div></div>
<p>字典可以很方便的表示结构性数据：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">tweet</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"user"</span> <span class="p">:</span> <span class="s">"joelgrus"</span><span class="p">,</span>
    <span class="s">"text"</span> <span class="p">:</span> <span class="s">"Data Science is Awesome"</span><span class="p">,</span>
    <span class="s">"retweet_count"</span> <span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s">"hashtags"</span> <span class="p">:</span> <span class="p">[</span><span class="s">"#data"</span><span class="p">,</span> <span class="s">"#science"</span><span class="p">,</span> <span class="s">"#datascience"</span><span class="p">,</span>
                  <span class="s">"#awesome"</span><span class="p">,</span> <span class="s">"#yolo"</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>
<p>除了查找特定的键，还可以查找下面的值：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">tweet_keys</span> <span class="o">=</span> <span class="n">tweet</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="c"># list of keys</span>
<span class="n">tweet_values</span> <span class="o">=</span> <span class="n">tweet</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="c"># list of values</span>
<span class="n">tweet_items</span> <span class="o">=</span> <span class="n">tweet</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="c"># list of (key, value) tuples</span>

<span class="s">"user"</span> <span class="ow">in</span> <span class="n">tweet_keys</span> <span class="c"># True, but uses a slow list in</span>
<span class="s">"user"</span> <span class="ow">in</span> <span class="n">tweet</span> <span class="c"># more Pythonic, uses faster dict in</span>
<span class="s">"joelgrus"</span> <span class="ow">in</span> <span class="n">tweet_values</span>
</code></pre></div></div>
<p>字典的键必须是不可变得，因此，不能将列表作为键，如果需要多键，可以使用元组或者把键转化成字符串。</p>

<h3 id="默认字典">默认字典</h3>

<p>假如需要对文档的单词进行计数，常规的方法如下：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">document</span> <span class="o">=</span> <span class="s">"Hello how are you. Every one has a mi ring"</span>
<span class="n">word_counts</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">document</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">word_counts</span><span class="p">:</span>
        <span class="n">word_counts</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">word_counts</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">word_counts</span>
</code></pre></div></div>
<p>或者使用异常机制来处理首次添加：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">word_counts</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">document</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">word_counts</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">except</span> <span class="nb">KeyError</span><span class="p">:</span>
        <span class="n">word_counts</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</code></pre></div></div>

<p>第三种方法是使用<code class="highlighter-rouge">get</code>方法：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">word_counts</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">document</span><span class="p">:</span>
    <span class="n">previous_count</span> <span class="o">=</span> <span class="n">word_counts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">word_counts</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">=</span> <span class="n">previous_count</span> <span class="o">+</span> <span class="mi">1</span>
</code></pre></div></div>
<p>但这三种方法看起来都有些别扭，更好的方法是使用<code class="highlighter-rouge">defaultdict</code>。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>

<span class="n">word_counts</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="c"># int() produces 0</span>
<span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">document</span><span class="p">:</span>
    <span class="n">word_counts</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

</code></pre></div></div>
<p>除了应用在整数上，还能应用在列表或字典，甚至自己的函数上：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dd_list</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span> <span class="c"># list() produces an empty list</span>
<span class="n">dd_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c"># now dd_list contains {2: [1]}</span>

<span class="n">dd_dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span> <span class="c"># dict() produces an empty dict</span>
<span class="n">dd_dict</span><span class="p">[</span><span class="s">"Joel"</span><span class="p">][</span><span class="s">"City"</span><span class="p">]</span> <span class="o">=</span> <span class="s">"Seattle"</span> <span class="c"># {"Joel": {"City":"Seattle"}}</span>

<span class="n">dd_pair</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">dd_pair</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c"># {2: [0,1]}</span>
</code></pre></div></div>
<p>所以这是一种很方便的省却检查键是否存在的解决方案。</p>

<h3 id="计数">计数</h3>

<p>计数构造了一个字典，并将键映射到个数：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span> <span class="c"># c is (basically) {0:2, 1:1, 2:1}</span>
</code></pre></div></div>
<p>因此这可以方便的解决我们的单词统计问题：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">word_counts</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
</code></pre></div></div>
<p>计数示例有一个<code class="highlighter-rouge">most_common</code>方法很有效：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># print the 10 most common words and their counts</span>
<span class="k">for</span> <span class="n">word</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">word_counts</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="集合">集合</h2>

<p>集合是另一种数据结构，表达了离散元素的集合。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">s</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c"># s is now { 1 }</span>
<span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c"># s is now {1, 2}</span>
<span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c"># s is still { 1, 2}</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="c"># equals 2</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">2</span> <span class="ow">in</span> <span class="n">s</span> <span class="c"># equals True</span>
<span class="n">z</span> <span class="o">=</span> <span class="mi">3</span> <span class="ow">in</span> <span class="n">s</span> <span class="c"># equals False</span>
</code></pre></div></div>
<p>使用集合主要有两个理由。第一个是<code class="highlighter-rouge">in</code>操作在集合中应用非常快，类似于字典中键的查找：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">stopwords_list</span> <span class="o">=</span> <span class="p">[</span><span class="s">"a"</span><span class="p">,</span><span class="s">"an"</span><span class="p">,</span><span class="s">"at"</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="s">"manyotherwords"</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="s">"yet"</span><span class="p">,</span> <span class="s">"you"</span><span class="p">]</span>
<span class="s">"zip"</span> <span class="ow">in</span> <span class="n">stopwords_list</span> <span class="c"># False, but have to check every element</span>
<span class="n">stopwords_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">stopwords_list</span><span class="p">)</span>
<span class="s">"zip"</span> <span class="ow">in</span> <span class="n">stopwords_set</span> <span class="c"># very fast to check</span>
</code></pre></div></div>
<p>第二个理由是找到集合中不同项：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">item_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">num_items</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">item_list</span><span class="p">)</span> <span class="c"># 6</span>
<span class="n">item_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">item_list</span><span class="p">)</span>  <span class="c"># {1，2，3}</span>
<span class="n">num_distinct_items</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">item_set</span><span class="p">)</span> <span class="c"># 3</span>
<span class="n">distinct_items</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">item_set</span><span class="p">)</span> <span class="c"># [1, 2, 3]</span>
</code></pre></div></div>
<p>集合比字典和列表使用的少得多。</p>

<h2 id="控制流">控制流</h2>

<p>像大部分编程语言，python可以使用<code class="highlighter-rouge">if</code>：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
    <span class="n">message</span> <span class="o">=</span> <span class="s">"if only 1 were greater than two..."</span>
<span class="k">elif</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
    <span class="n">message</span> <span class="o">=</span> <span class="s">"elif stands for 'else if'"</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">message</span> <span class="o">=</span> <span class="s">"when all else fails use else (if you want to)"</span>
</code></pre></div></div>
<p>有时候还可以写成一行：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">parity</span> <span class="o">=</span> <span class="s">"even"</span> <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="s">"odd"</span>
</code></pre></div></div>
<p>Python还有一个<code class="highlighter-rouge">while</code>循环：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s">"is less than 10"</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div></div>
<p>但更常用的是<code class="highlighter-rouge">for</code>和<code class="highlighter-rouge">in</code>：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s">"is less than 10"</span><span class="p">)</span>
</code></pre></div></div>
<p>如果要控制更复杂的逻辑，可以使用<code class="highlighter-rouge">continue</code>和<code class="highlighter-rouge">break</code>：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">continue</span> <span class="c"># go immediately to the next iteration</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
        <span class="k">break</span> <span class="c"># quit the loop entirely</span>
    <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="真值">真值</h2>

<p>布尔型在python中也和其他语言一样，除了是大写的：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">one_is_less_than_two</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="c"># equals True</span>
<span class="n">true_equals_false</span> <span class="o">=</span> <span class="bp">True</span> <span class="o">==</span> <span class="bp">False</span> <span class="c"># equals False</span>
</code></pre></div></div>
<p><code class="highlighter-rouge">None</code>表示一个不存在的值，类似于其他语言的<code class="highlighter-rouge">null</code>：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="bp">None</span>
<span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="o">==</span><span class="bp">None</span><span class="p">)</span> <span class="c"># prints True, but is not Pythonic</span>
<span class="k">print</span><span class="p">(</span><span class="n">x</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)</span> <span class="c"># prints True, and is Pythonic</span>
</code></pre></div></div>
<p>Python在它期望布尔值时允许任何值，下面的值都被认为是假值：</p>

<ul>
  <li>False</li>
  <li>None</li>
  <li>[](空列表）</li>
  <li>{}（空字典）</li>
  <li>””</li>
  <li>set()</li>
  <li>0</li>
  <li>0.0</li>
</ul>

<p>其他任何值都被认为是真值，这在<code class="highlighter-rouge">if</code>中测试空字符串或空字典时格外有用</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">s</span> <span class="o">=</span> <span class="n">some_function_that_returns_a_string</span><span class="p">()</span>
<span class="k">if</span> <span class="n">s</span><span class="p">:</span>
    <span class="n">first_char</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">first_char</span> <span class="o">=</span> <span class="s">""</span>
</code></pre></div></div>
<p>一种更简单的方法是：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">first_char</span> <span class="o">=</span> <span class="n">s</span> <span class="ow">and</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></div>
<p>因为<code class="highlighter-rouge">and</code>操作会在第一个值为真时返回第二个值，第一个值为假时返回第一个值。下面用了类似的技巧：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">safe_x</span> <span class="o">=</span> <span class="n">x</span> <span class="ow">or</span> <span class="mi">0</span>
</code></pre></div></div>
<p>python还有一个<code class="highlighter-rouge">all</code>函数，输入一个列表，当列表所有元素是真时返回真，还有一个<code class="highlighter-rouge">any</code>函数，至少有一个元素是真时返回真：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">all</span><span class="p">([</span><span class="bp">True</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">{</span><span class="mi">3</span><span class="p">}])</span> <span class="c"># True</span>
<span class="nb">all</span><span class="p">([</span><span class="bp">True</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">{}])</span> <span class="c"># False, {} is falsy</span>
<span class="nb">any</span><span class="p">([</span><span class="bp">True</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">{}])</span> <span class="c"># True, True is truthy</span>
<span class="nb">all</span><span class="p">([])</span> <span class="c"># True, no falsy elements in the list</span>
<span class="nb">any</span><span class="p">([])</span> <span class="c"># False, no truthy elements in the list</span>
</code></pre></div></div>

<h2 id="排序">排序</h2>

<p>每个python列表都有一个<code class="highlighter-rouge">sort</code>方法，如果不想改变原列表，也可以使用<code class="highlighter-rouge">sorted</code>函数，会返回一个新列表：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="c"># is [1,2,3,4], x is unchanged</span>
<span class="n">x</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span> <span class="c"># now x is [1,2,3,4]</span>
</code></pre></div></div>
<p>默认情况下，列表排序会从小到大进行，如果想要从大到小排序，可以指定<code class="highlighter-rouge">reverse=True</code>参数。除了比较元素本身，还可以用参数<code class="highlighter-rouge">key</code>指定函数。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># sort the list by absolute value from largest to smallest</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">key</span><span class="o">=</span><span class="nb">abs</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c"># is [-4,3,-2,1]</span>

<span class="c"># sort the words and counts from highest count to lowest</span>
<span class="n">wc</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">word_counts</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span>
           <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">pair</span><span class="p">:</span> <span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
           <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="列表生成器">列表生成器</h2>

<p>列表生成器可以很方便的将列表转换成另一个列表，这是典型的Pythonic方法。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">even_numbers</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span> <span class="c"># [0, 2, 4]</span>
<span class="n">squares</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span> <span class="c"># [0, 1, 4, 9, 16]</span>
<span class="n">even_squares</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">even_numbers</span><span class="p">]</span> <span class="c"># [0, 4, 16]</span>
</code></pre></div></div>
<p>这种用法也能把列表转换成字典或集合：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">square_dict</span> <span class="o">=</span> <span class="p">{</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)}</span> <span class="c"># {0:0, 1:1, 2:4, 3:9, 4:16}</span>
<span class="n">squre_set</span> <span class="o">=</span> <span class="p">(</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="c"># {1}</span>
</code></pre></div></div>
<p>如果不需要使用到列表中的值，就用下划线替代：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">zeroes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">even_numbers</span><span class="p">]</span> <span class="c"># has the same length as even_numbers</span>
</code></pre></div></div>
<p>列表生成器还能使用多个<code class="highlighter-rouge">for</code>：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pairs</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
</code></pre></div></div>
<p>后面的<code class="highlighter-rouge">for</code>可以应用前面的<code class="highlighter-rouge">for</code>结果：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">increasing_pairs</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="c"># only pairs with x &lt; y</span>
                   <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c"># range(lo, hi) equals</span>
                   <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span> <span class="c"># [lo, lo + 1, ..., hi - 1]</span>
</code></pre></div></div>

<h2 id="生成器和迭代器">生成器和迭代器</h2>
<p>列表有一个问题就是容易变得很大，如果每次只需要使用很少的元素，计算整个列表就会很低效，还可能耗尽内存。</p>

<p>生成器是一种可以迭代（常常用<code class="highlighter-rouge">for</code>），但值只有在需要使用时才计算。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">lazy_range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="s">"""a lazy version of range"""</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">i</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div></div>
<p>下面的循环就是依次使用yield里的值直到结束：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">lazy_range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="c"># do_something_with(i)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</code></pre></div></div>
<p>在python3中，<code class="highlighter-rouge">range</code>本身就是个生成器，这意味着生成器可以创建无限的序列：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">natural_numbers</span><span class="p">():</span>
    <span class="s">"""returns 1, 2, 3, ..."""</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">n</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div></div>
<p>当然在实际应用中需要和<code class="highlighter-rouge">break</code>配合使用。</p>

<p>生成器的一个缺点就是只能迭代一次，如果需要迭代多次，那就需要新建生成器或者使用列表。</p>

<p>另一种创建生成器的方法是使用小括号的列表生成器：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lazy_evens_below_20</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">lazy_range</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div></div>
<p>前面提到<code class="highlighter-rouge">dict</code>有一个<code class="highlighter-rouge">items()</code>方法可以返回键值对。更常用的我们使用它的<code class="highlighter-rouge">iteritems()</code>方法，这就是一个生成器方法。</p>

<h2 id="随机数">随机数</h2>
<p>使用<code class="highlighter-rouge">random</code>模块，可以很方便的生成随机数。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">random</span>
<span class="n">four_uniform_randoms</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span>

<span class="c"># [0.8444218515250481, # random.random() produces numbers</span>
<span class="c">#  0.7579544029403025, # uniformly between 0 and 1</span>
<span class="c">#  0.420571580830845, # it's the random function we'll use</span>
<span class="c">#  0.25891675029296335] # most often</span>
</code></pre></div></div>
<p><code class="highlighter-rouge">random</code>模块实际上产生的是根据内部状态产生伪随机数，如果想要得到可重复结果，可以使用<code class="highlighter-rouge">random.seed</code>：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c"># set the seed to 10</span>
<span class="k">print</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span> <span class="c"># 0.57140259469</span>
<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c"># reset the seed to 10</span>
<span class="k">print</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span> <span class="c"># 0.57140259469 again</span>
</code></pre></div></div>
<p>有时也会用到<code class="highlighter-rouge">random.randrange</code>，可以传1或2个参数，返回一个从<code class="highlighter-rouge">range()</code>中随机抽取的值：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c"># choose randomly from range(10) = [0, 1, ..., 9]</span>
<span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="c"># choose randomly from range(3, 6) = [3, 4, 5]</span>
</code></pre></div></div>
<p>另外还有一些方法也很有用，<code class="highlighter-rouge">random.shuffle</code>将列表元素随机排列：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">up_to_ten</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">up_to_ten</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">up_to_ten</span><span class="p">)</span>
<span class="c"># [2, 5, 1, 9, 7, 3, 8, 6, 4, 0]</span>
</code></pre></div></div>
<p>想要随机从列表中抽取一个元素，可以使用<code class="highlighter-rouge">random.choice</code>：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">my_best_friend</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s">"Alice"</span><span class="p">,</span> <span class="s">"Bob"</span><span class="p">,</span> <span class="s">"Charlie"</span><span class="p">])</span>
</code></pre></div></div>
<p>如果想要随机抽取一组不重复样本，使用<code class="highlighter-rouge">random.sample</code></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lottery_numbers</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
<span class="n">winning_numbers</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">lottery_numbers</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</code></pre></div></div>
<p>如果想要抽取重复样本，还是使用<code class="highlighter-rouge">random.choice</code>：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">four_with_replacement</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span>
</code></pre></div></div>

<h2 id="正则表达式">正则表达式</h2>

<p>正则表达式在搜索文本时很有用，但其相当的复杂，这里只简单的列举几例：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">re</span>

<span class="k">print</span><span class="p">(</span><span class="nb">all</span><span class="p">([</span> <span class="c"># all of these are true, because</span>
        <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">"a"</span><span class="p">,</span> <span class="s">"cat"</span><span class="p">),</span> <span class="c"># * 'cat' doesn't start with 'a'</span>
        <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">"a"</span><span class="p">,</span> <span class="s">"cat"</span><span class="p">),</span> <span class="c"># * 'cat' has an 'a' in it</span>
        <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">"c"</span><span class="p">,</span> <span class="s">"dog"</span><span class="p">),</span> <span class="c"># * 'dog' doesn't have a 'c' in it</span>
        <span class="mi">3</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">"[ab]"</span><span class="p">,</span> <span class="s">"carbs"</span><span class="p">)),</span> <span class="c"># * split on a or b to ['c', 'r', 's']</span>
        <span class="s">"R-D-"</span> <span class="o">==</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">"[0-9]"</span><span class="p">,</span> <span class="s">"-"</span><span class="p">,</span> <span class="s">"R2D2"</span><span class="p">)</span> <span class="c"># * replace digits with dashes</span>
    <span class="p">]))</span> <span class="c"># print True</span>
</code></pre></div></div>

<h2 id="面向对象编程">面向对象编程</h2>
<p>和其他语言一样，python允许你创建类来封装数据和函数。类的使用可以让我们的代码变得简洁。解释类最好的方法还是亲自构造一个。</p>

<p>假设现在我们没有内置的集合，我们来自己构造一个集合类。</p>

<p>我们的集合类需要有些什么成员函数？我们需要去添加元素，删除元素，验证元素是否存在，因此类构造如下：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># by convention, we give classes PascalCase names</span>
<span class="k">class</span> <span class="nc">Set</span><span class="p">:</span>

    <span class="c"># thest are the member functions</span>
    <span class="c"># every one takes a first parameter "self" (another convention)</span>
    <span class="c"># that refers to the particular Set object being used</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="s">"""This is the constructor.
        It gets called when you create a new Set.
        You would use it like
        s1 = Set() # empty set
        s2 = Set([1,2,3,4]) # initialize with values"""</span>

        <span class="bp">self</span><span class="o">.</span><span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span> <span class="c"># each instance if Set has its own dict property</span>
        					<span class="c"># which is what we'll use to track memberships</span>
        <span class="k">if</span> <span class="n">values</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""this is the string representation of a Set object
        if you type is at the Python prompt or pass it to str()"""</span>
        <span class="k">return</span> <span class="s">"Set: "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="c"># we'll represent membership by being a key in self.dict with</span>
    <span class="c"># value True</span>
    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="nb">dict</span><span class="p">[</span><span class="n">value</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="c"># value is in the Set if it's a key in the dictionary</span>
    <span class="k">def</span> <span class="nf">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="nb">dict</span>

    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="nb">dict</span><span class="p">[</span><span class="n">value</span><span class="p">]</span>
</code></pre></div></div>
<p>构建完类后，我们可以像内置类那样进行调用：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">s</span> <span class="o">=</span> <span class="n">Set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span> <span class="c"># True</span>
<span class="n">s</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span> <span class="c"># False</span>
</code></pre></div></div>

<h2 id="函数工具">函数工具</h2>

<p>有时候我们想要部分应用函数来创建一个新函数：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">exp</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">power</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">base</span> <span class="o">**</span> <span class="n">power</span>
</code></pre></div></div>
<p>现在想创建一个<code class="highlighter-rouge">two_to_the</code>函数，输入<code class="highlighter-rouge">power</code>，输出<code class="highlighter-rouge">exp(2, power)</code>。用下面这种方法可行，但看起来怪怪的：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">two_to_the</span><span class="p">(</span><span class="n">power</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">exp</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">power</span><span class="p">)</span>
</code></pre></div></div>
<p>另一种方法是使用<code class="highlighter-rouge">functools.partial</code></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="n">two_to_the</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">exp</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c"># is now a function of one variable</span>
<span class="k">print</span><span class="p">(</span><span class="n">two_to_the</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span> <span class="c"># 8</span>
</code></pre></div></div>
<p>也可以通过指定参数名来填充后一个参数：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">square_of</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">exp</span><span class="p">,</span> <span class="n">power</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">square_of</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c"># 9</span>
</code></pre></div></div>
<p>我们偶尔也会使用到<code class="highlighter-rouge">map</code>,<code class="highlighter-rouge">reduce</code>和<code class="highlighter-rouge">filter</code>来提供与列表生成器类似的功能。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">double</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">x</span>

<span class="n">xs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">twice_xs</span> <span class="o">=</span> <span class="p">[</span><span class="n">double</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xs</span><span class="p">]</span> <span class="c"># [2, 4, 6, 8]</span>
<span class="n">twice_xs</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">double</span><span class="p">,</span> <span class="n">xs</span><span class="p">)</span> <span class="c"># same as above</span>
<span class="n">list_doubler</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="nb">map</span><span class="p">,</span> <span class="n">double</span><span class="p">)</span> <span class="c"># *function* that doubles a list</span>
<span class="n">twice_xs</span> <span class="o">=</span> <span class="n">list_doubler</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span> <span class="c"># again [2, 4, 6, 8]</span>
</code></pre></div></div>
<p><code class="highlighter-rouge">map</code>也能使用多列表来来传递多参：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span> <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span>
<span class="n">products</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">multiply</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span> <span class="c"># [1 * 4, 2 * 5] = [4, 10]</span>
</code></pre></div></div>
<p><code class="highlighter-rouge">filter</code>提供了列表生成器中类似<code class="highlighter-rouge">if</code>的功能</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">is_even</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="s">"""True if x is even, False if x is odd"""</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>

<span class="n">x_evens</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xs</span> <span class="k">if</span> <span class="n">is_even</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span> <span class="c"># [2, 4]</span>
<span class="n">x_evens</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="n">is_even</span><span class="p">,</span> <span class="n">xs</span><span class="p">)</span> <span class="c"># same as above</span>
<span class="n">list_evener</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="nb">filter</span><span class="p">,</span> <span class="n">is_even</span><span class="p">)</span> <span class="c"># *function* that filters a list</span>
<span class="n">x_evens</span> <span class="o">=</span> <span class="n">list_evener</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span> <span class="c"># again [2, 4]</span>
</code></pre></div></div>
<p>在python3中，<code class="highlighter-rouge">reduce</code>已经不是内置函数了，需要从<code class="highlighter-rouge">functools</code>中导入，更推荐用列表生成器来处理：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="nb">reduce</span>
<span class="n">x_product</span> <span class="o">=</span> <span class="nb">reduce</span><span class="p">(</span><span class="n">multiply</span><span class="p">,</span> <span class="n">xs</span><span class="p">)</span>
<span class="n">list_product</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="nb">reduce</span><span class="p">,</span> <span class="n">multiply</span><span class="p">)</span>
<span class="n">x_product</span> <span class="o">=</span> <span class="n">list_product</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span>
</code></pre></div></div>
<p>此外，在python3中，这三个函数都产生生成器而不是之前的列表了。</p>

<h2 id="遍历">遍历</h2>

<p>很多时候，经常需要同时遍历列表中的元素及其序号：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># not Pythonic</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">documents</span><span class="p">)):</span>
    <span class="n">document</span> <span class="o">=</span> <span class="n">documents</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">do_something</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">document</span><span class="p">)</span>

<span class="c"># also not Pythonic</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">document</span> <span class="ow">in</span> <span class="n">documents</span><span class="p">:</span>
    <span class="n">do_something</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">document</span><span class="p">)</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">Pythonic</span><span class="err">式的解决办法是是使用</span><span class="sb">`enumerate`</span><span class="p">:</span>

<span class="c"># Pythonic</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">document</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">documents</span><span class="p">):</span>
    <span class="n">do_something</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">document</span><span class="p">)</span>
</code></pre></div></div>
<p>类似的，如果我们仅仅想使用序号：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">documents</span><span class="p">)):</span> <span class="n">do_something</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="c"># not Pythonic</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">documents</span><span class="p">):</span> <span class="n">do_something</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="c"># Pythonic</span>
</code></pre></div></div>

<h2 id="打包与解压">打包与解压</h2>

<p>我们常常需要把两个列表打包起来，<code class="highlighter-rouge">zip</code>提供了将多个列表转换成一个含元组的列表的功能：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">list1</span> <span class="o">=</span> <span class="p">[</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">,</span> <span class="s">'c'</span><span class="p">]</span>
<span class="n">list2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="nb">zip</span><span class="p">(</span><span class="n">list1</span><span class="p">,</span> <span class="n">list2</span><span class="p">)</span> <span class="c"># is [('a', 1), ('b', 2), ('c', 3)]</span>
</code></pre></div></div>
<p>如果列表的长度不一致，那就在最短列表处停止。</p>

<p>还可以解压回来，代码看起来比较奇怪：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pairs</span> <span class="o">=</span> <span class="p">[(</span><span class="s">'a'</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">'b'</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">'c'</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="n">letters</span><span class="p">,</span> <span class="n">numbers</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">pairs</span><span class="p">)</span>
</code></pre></div></div>
<p>星号实现了参数解压的功能，把每个列表元素作为<code class="highlighter-rouge">zip</code>的参数传入，其相当于下面这个调用：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">zip</span><span class="p">((</span><span class="s">'a'</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">'b'</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">'c'</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</code></pre></div></div>
<p>最终返回<code class="highlighter-rouge">[('a','b','c'),('1','2','3')]</code></p>

<p>这种技巧可以应用在任何函数上：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span> <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="c"># returns 3</span>
<span class="n">add</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span> <span class="c"># TypeError!</span>
<span class="n">add</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span> <span class="c"># returns 3</span>
</code></pre></div></div>
<p>有没有好奇怪的感觉~~</p>

<h2 id="无名参数和关键字参数">无名参数和关键字参数</h2>

<p>首先来创建一个高阶函数：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">doubler</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">g</span>
</code></pre></div></div>

<p>可以调用如下：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">f1</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">doubler</span><span class="p">(</span><span class="n">f1</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span> <span class="c"># 8 (==(3+1)*2)</span>
<span class="k">print</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="c"># 0 (==(-1+1)*2)</span>
</code></pre></div></div>

<p>但假如f不止一个参数时，传入g时就会报错：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">f2</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">doubler</span><span class="p">(</span><span class="n">f2</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="c"># TypeError: g() takes exactly 1 argument (2 given)</span>
</code></pre></div></div>

<p>我们需要一种方法来传递任意参数给函数，我们还是用上了前面的参数解压的技巧：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">magic</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"unnamed args:"</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"keyword args:"</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>

<span class="n">magic</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">"word"</span><span class="p">,</span> <span class="n">key2</span><span class="o">=</span><span class="s">"word2"</span><span class="p">)</span>

<span class="c"># prints</span>
<span class="c"># unnamed args: (1, 2)</span>
<span class="c"># keyword args: {'key': 'word', 'key2': 'word2'}</span>
</code></pre></div></div>
<p>当我们这样定义时，<code class="highlighter-rouge">args</code>代表的是无名参数构成的元组，<code class="highlighter-rouge">kwargs</code>代表的是关键字参数构造的字典。另一方面，如果用列表或元组以及字典来传参，函数也可以构造如下：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">other_way_magic</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">+</span> <span class="n">z</span>

<span class="n">x_y_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">z_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s">"z"</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="n">other_way_magic</span><span class="p">(</span><span class="o">*</span><span class="n">x_y_list</span><span class="p">,</span> <span class="o">**</span><span class="n">z_dict</span><span class="p">)</span> <span class="c"># 6</span>
</code></pre></div></div>
<p>这种技巧我们只在构造高阶函数时使用到，下面是正确的g函数：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">doubler_correct</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="s">"""works no matter what kind of inputs f expects"""</span>
    <span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="s">"""whatever arguments g is supplied, pass them"""</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">g</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">doubler_correct</span><span class="p">(</span><span class="n">f2</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="c"># 6</span>
</code></pre></div></div>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> 标签: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="http://localhost:4000/tags/#python" class="page__taxonomy-item" rel="tag">Python</a><span class="sep">, </span>
    
      
      
      <a href="http://localhost:4000/tags/#%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80" class="page__taxonomy-item" rel="tag">编程语言</a><span class="sep">, </span>
    
      
      
      <a href="http://localhost:4000/tags/#%E8%AF%AD%E6%B3%95" class="page__taxonomy-item" rel="tag">语法</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> 分类: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="http://localhost:4000/categories/#%E7%AC%94%E8%AE%B0" class="page__taxonomy-item" rel="tag">笔记</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> 更新时间:</strong> <time datetime="2016-05-07T00:00:00+08:00">May 07, 2016</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="http://localhost:4000/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/linear-invariance-ps/" class="pagination--pager" title="优化算法线性不变习题
">向前</a>
    
    
      <a href="http://localhost:4000/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/construct-kernel-ps/" class="pagination--pager" title="核函数构造习题
">向后</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">猜您还喜欢</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "http://localhost:4000/img/tree.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="http://localhost:4000/%E5%B7%A5%E5%85%B7/%E5%8D%9A%E5%AE%A2%E9%87%8D%E5%BB%BA/" rel="permalink">博客重建
</a>
      
    </h2>
    
    <p class="archive__item-excerpt" itemprop="description">今天花了整整一天的时候把我的博客重建起来了，主要是换了一个主题，然后剩下的时候就一直在折腾了。这次用了一个很受欢迎的minimal-mistakes，搞下来才发现它为啥叫迷你了，自己要设置的东西太多了！

</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "http://localhost:4000/img/tree.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="http://localhost:4000/%E4%BA%BA%E7%94%9F%E7%9A%84%E6%84%8F%E4%B9%89/" rel="permalink">人生的意义
</a>
      
    </h2>
    
    <p class="archive__item-excerpt" itemprop="description">人生的意义

</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "http://localhost:4000/img/tree.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="http://localhost:4000/%E5%B7%A5%E5%85%B7/shadowsocksr/" rel="permalink">shadowsocksR
</a>
      
    </h2>
    
    <p class="archive__item-excerpt" itemprop="description">时代在发展，shadowsocks源作者已经被请去喝茶了，现在更流行的一个叫shadowsocksR加强版，感谢两位作者。这里也趁着换VPS的同时新装了一个shadowsocksR。

</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "http://localhost:4000/img/tree.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="http://localhost:4000/%E7%AC%94%E8%AE%B0/ruby-gem-bundler/" rel="permalink">ruby &amp; gem &amp; bundler
</a>
      
    </h2>
    
    <p class="archive__item-excerpt" itemprop="description">ruby

</p>
  </article>
</div>
        
      </div>
    </div>
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap">
  <input type="text" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  <div id="results" class="results"></div>
</div>
      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>关注:</strong></li>
    
    
    
    
      <li><a href="https://github.com/anyinlover"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    
    <li><a href="http://localhost:4000/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2018 Anyinlover. 技术来自于 <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="http://localhost:4000/assets/js/main.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.0.2/js/all.js"></script>



  
  
  <script defer src="http://localhost:4000/assets/js/lunr/lunr.min.js"></script>
  <script defer src="http://localhost:4000/assets/js/lunr/lunr-store.js"></script>
  <script defer src="http://localhost:4000/assets/js/lunr/lunr-en.js"></script>







    
  <script>
    var disqus_config = function () {
      this.page.url = "http://localhost:4000/%E7%AC%94%E8%AE%B0/crash-python/";  // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = "/%E7%AC%94%E8%AE%B0/crash-python"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://anyinlover.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  



  </body>
</html>