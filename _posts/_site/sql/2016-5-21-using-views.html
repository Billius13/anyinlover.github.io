<p>本讲主要学习视图，原理及何时使用。可以看到视图能够简化操作。</p>

<h2 id="section">理解视图</h2>

<p>视图是虚拟的表，它没有实体的数据，只是包含动态查询的结果。</p>

<h3 id="section-1">为何使用视图</h3>

<p>视图有以下几个常见的用法：</p>

<ul>
  <li>重用SQL语句</li>
  <li>简化复杂SQL操作</li>
  <li>导出部分表</li>
  <li>保护数据</li>
  <li>更改数据的样式和表达</li>
</ul>

<p>当视图创建之后，它可以执行和表一样的操作。</p>

<h3 id="section-2">视图的规则和限制</h3>

<ul>
  <li>视图的命名也必须是唯一的。</li>
  <li>视图的数量没有限制。</li>
  <li>创建视图需要有安全权限。</li>
  <li>视图可以嵌套。</li>
  <li>视图不可被索引，不能有触发器或默认值。</li>
</ul>

<h2 id="section-3">创建视图</h2>

<p>使用<code>CREATE VIEW</code>语句创建视图。</p>

<h3 id="section-4">使用视图来简化复杂连接</h3>

<pre><code class="language-sql">CREATE VIEW ProductCustomers AS
SELECT cust_name, cust_contact, prod_id
FROM Customers, Orders, OrderItems
WHERE Customers.cust_id=Orders.cust_id
AND OrderItems.order_num=Orders.order_num;

SELECT cust_name, cust_contact
FROM ProductCustomers
WHERE prod_id='RGAN01';
</code></pre>

<h3 id="section-5">使用视图更改数据样式</h3>

<pre><code class="language-sql">Create VIEW VendorLocations AS
SELECT CONCAT(vend_name, ' (', vend_country, ')')
AS vend_title
FROM Vendors;

SELECT * FROM vendorlocations;
</code></pre>

<h2 id="section-6">使用视图过滤不必要的数据</h2>

<pre><code class="language-sql">CREATE VIEW CustomerEMailList AS
SELECT cust_id, cust_name, cust_email
FROM Customers
WHERE cust_email IS NOT NULL;

SELECT * FROM CustomerEMailList;
</code></pre>

<h2 id="section-7">使用视图表示计算字段</h2>

<pre><code class="language-sql">CREATE VIEW OrderItemsExpanded AS
SELECT order_num,
		prod_id,
        quantity,
        item_price,
        quantity*item_price AS expanded_price
FROM OrderItems;

SELECT * FROM OrderItemsExpanded
WHERE order_num=20008;
</code></pre>
