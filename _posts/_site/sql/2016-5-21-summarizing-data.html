<p>本讲主要学习SQL统计函数来总结整表数据。</p>

<h2 id="section">使用统计函数</h2>

<p>SQL提供了五种统计函数，用于对数据进行一个总结性的了解。</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">函数</th>
      <th style="text-align: left">作用</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code>AVG()</code></td>
      <td style="text-align: left">平均值</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>COUNT()</code></td>
      <td style="text-align: left">行数</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>MAX()</code></td>
      <td style="text-align: left">最高值</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>MIN()</code></td>
      <td style="text-align: left">最低值</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>SUM()</code></td>
      <td style="text-align: left">和值</td>
    </tr>
  </tbody>
</table>

<h3 id="avg"><code>AVG()</code>函数</h3>

<pre><code class="language-sql">SELECT AVG(prod_price) AS avg_price
FROM Products;

SELECT AVG(prod_price) AS avg_price
FROM Products
WHERE vend_id = 'DLL01';
</code></pre>

<p><code>NULL</code>值会被<code>AVG()</code>忽略不计。</p>

<h3 id="count"><code>COUNT()</code>函数</h3>

<p>使用<code>COUNT(*)</code>会计算所有的行数，包括<code>NULL</code>值的。</p>

<pre><code class="language-sql">SELECT COUNT(*) AS num_cust
FROM Customers;
</code></pre>

<p>使用<code>COUNT(column)</code>则会把<code>NULL</code>值排除在外。</p>

<pre><code class="language-sql">SELECT COUNT(cust_email) AS num_cust
FROM Customers;
</code></pre>

<h3 id="max"><code>MAX()</code>函数</h3>

<pre><code class="language-sql">SELECT MAX(prod_price) AS max_price
FROM Products;
</code></pre>

<p>除了应用在数字数据上，<code>MAX()</code>也可以应用在文本数据上。</p>

<h3 id="min"><code>MIN()</code>函数</h3>

<pre><code class="language-sql">SELECT MIN(prod_price) AS min_price
FROM Products;
</code></pre>

<p>和<code>MAX()</code>类似，<code>MIN()</code>也能应用在文本数据上。</p>

<h3 id="sum"><code>SUM()</code>函数</h3>

<pre><code class="language-sql">SELECT SUM(quantity) AS items_ordered
FROM OrderItems
WHERE order_num=20005;

SELECT SUM(item_price*quantity) AS total_price
FROM OrderItems
WHERE order_num=20005;
</code></pre>

<h2 id="section-1">独特值统计</h2>

<p>如果要计算独特值得统计数据，可以使用<code>DISTINCT</code>关键字，但注意只能配合列名使用：</p>

<pre><code class="language-sql">SELECT AVG(DISTINCT prod_price) AS avg_price
FROM Products
WHERE vend_id='DLL01';
</code></pre>

<h2 id="section-2">联合统计函数</h2>

<pre><code class="language-sql">SELECT COUNT(*) AS num_items,
		MIN(prod_price) AS price_min,
      	MAX(prod_price) AS price_max,
        AVG(prod_price) AS price_avg
FROM Products;
</code></pre>
