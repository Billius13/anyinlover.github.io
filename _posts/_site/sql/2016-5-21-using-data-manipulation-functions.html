<p>本讲中主要学习什么是函数，数据库支持哪些类型的函数，以及如何使用这些函数。</p>

<h2 id="section">理解函数</h2>

<p>和其他语言一样，SQL也支持使用函数来处理数据。比如前面提到的<code>RTRIM</code></p>

<p>但SQL函数有一个问题，就是和数据库管理系统强相关。不同的数据库支持的函数差别较大。因此，使用函数来处理数据时，一个好的习惯是加上注释。</p>

<h2 id="section-1">使用函数</h2>
<p>大部分SQL实现了下面四种类型的函数：</p>

<ul>
  <li>文本函数，处理文本字符串。</li>
  <li>数字函数，数学运算。</li>
  <li>时间日期函数。</li>
  <li>系统函数。</li>
</ul>

<p>函数除了使用在<code>SELECT</code>部分，也可以使用在SQL语句的其他部分，比如<code>WHERE</code>。</p>

<h3 id="section-2">文本处理函数</h3>

<pre><code class="language-sql">SELECT vend_name, UPPER(vend_name) AS vend_name_upcase
FROM Vendors
ORDER BY vend_name;
</code></pre>

<p>下面是一些通用的文本处理函数：</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">函数</th>
      <th style="text-align: left">作用</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code>LEFT()</code></td>
      <td style="text-align: left">从左取子字符串</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>LENGTH()</code></td>
      <td style="text-align: left">字符串长度</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>LOWER()</code></td>
      <td style="text-align: left">字符串小写</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>LTRIM()</code></td>
      <td style="text-align: left">截除字符串首空格</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>RIGHT()</code></td>
      <td style="text-align: left">从右取字符串</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>RTRIM()</code></td>
      <td style="text-align: left">截除字符串尾空格</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>SOUNDEX()</code></td>
      <td style="text-align: left">返回字符串音值</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>UPPER()</code></td>
      <td style="text-align: left">字符串大写</td>
    </tr>
  </tbody>
</table>

<p>这里面<code>SOUNDEX()</code>比较特殊，用来查找发音相似的字符串：</p>

<pre><code class="language-sql">SELECT cust_name, cust_contact
FROM Customers
WHERE SOUNDEX(cust_contact)=SOUNDEX('Michael Green');
</code></pre>

<h2 id="section-3">日期时间处理函数</h2>

<p>日期和时间在数据库中以数据库管理系统特有的格式存储，实际使用时需要通过日期时间处理函数来调用，这一部分函数非常重要，但同时也非常不具有普遍性。</p>

<pre><code class="language-sql">SELECT order_num
FROM Orders
WHERE YEAR(order_date)=2012;
</code></pre>

<p>具体的日期时间处理函数需要参照不同SQL的产品文档。</p>

<h2 id="section-4">数字函数</h2>

<p>数字函数和上面两者相比最不常用，却是最普遍性的。下面列举一些常见的数字处理函数：</p>

<ul>
  <li><code>ABS()</code></li>
  <li><code>COS()</code></li>
  <li><code>EXP()</code></li>
  <li><code>PI()</code></li>
  <li><code>SIN()</code></li>
  <li><code>SQRT()</code></li>
  <li><code>TAN()</code></li>
</ul>
